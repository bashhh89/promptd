<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Library | Proposal for One Home Service</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        // Support for Tailwind CSS dark mode
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .prompt-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, opacity 0.3s ease;
            opacity: 1;
        }
        .prompt-card.hidden-card {
            transform: scale(0.95);
            opacity: 0;
            height: 0;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        .prompt-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .dark .prompt-card:hover {
            box-shadow: 0 10px 15px -3px rgba(79, 70, 229, 0.2), 0 4px 6px -2px rgba(79, 70, 229, 0.1);
        }
        .sidebar-item.active {
            background-color: #4f46e5;
            color: white;
        }
        .dark .sidebar-item.active {
            background-color: #6366f1;
        }
        .sidebar-item {
             transition: background-color 0.2s ease, color 0.2s ease;
        }
        .copy-btn {
            transition: background-color 0.2s ease;
        }
        .copy-btn.copied {
            background-color: #22c55e;
        }
        /* Collapsible section styles */
        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .collapsible-content.expanded {
            max-height: 500px; /* Adjust as needed */
            transition: max-height 0.5s ease-in;
        }
        .collapsible-trigger .arrow {
            transition: transform 0.3s ease;
        }
        .collapsible-trigger.open .arrow {
            transform: rotate(90deg);
        }
        /* Modal styles */
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        #modal-generate-btn:disabled {
            background-color: #a5b4fc;
            cursor: not-allowed;
        }
        .dark #modal-generate-btn:disabled {
            background-color: #4338ca;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-200">

    <!-- Modal for Live Simulator -->
    <div id="modal-overlay" class="modal-overlay fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div id="modal-content" class="modal-content bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col transform scale-95 opacity-0">
            <div class="flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-bold text-gray-900 dark:text-white">Live AI Trial</h3>
                <button id="close-modal-btn" class="text-gray-400 hover:text-gray-600 dark:hover:text-white text-3xl leading-none">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto">
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Edit the prompt below and click "Generate" to get a live response from the selected AI model. This is a real trial to compare how different models interpret the same instructions.</p>
                <h4 class="font-semibold text-gray-800 dark:text-gray-100 mb-2">Edit Prompt:</h4>
                <textarea id="modal-prompt-editor" class="w-full h-48 p-3 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                <div class="mt-4 text-right">
                    <button id="modal-generate-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                        <span id="generate-btn-text">Generate Output</span>
                        <span id="generate-btn-spinner" class="hidden">
                            <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            Generating...
                        </span>
                    </button>
                </div>
                <div id="modal-output-container" class="mt-6 hidden">
                    <h4 class="font-semibold text-gray-800 dark:text-gray-100 mb-2">Live AI Output:</h4>
                    <div class="bg-gray-100 dark:bg-gray-900 border-l-4 border-indigo-500 p-4 rounded-r-lg min-h-[100px]">
                        <pre id="modal-output-text" class="text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="flex flex-col md:flex-row min-h-screen">
        <!-- Sidebar -->
        <aside class="w-full md:w-72 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 p-6 flex-shrink-0">
            <div class="flex items-center space-x-3 mb-8">
                 <img src="https://onehomeservice.ai/public/site_assets/images/logo.svg" alt="One Home Service Logo" class="h-8 w-8" />
                <h1 class="text-xl font-bold text-gray-900 dark:text-white">Prompt Library</h1>
            </div>
            <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">A sample playbook created for One Home Service.</p>
            
            <!-- AI Configuration -->
            <div class="space-y-4 mb-6">
                <div>
                    <label for="model-selector" class="block text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">AI Model</label>
                    <select id="model-selector" class="w-full p-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"></select>
                     <p class="text-xs text-gray-400 mt-2">Note: This demo uses an endpoint compatible with OpenAI models. Other models may not work as expected.</p>
                </div>
            </div>

            <nav id="sidebar-nav">
                <h2 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3">Categories</h2>
                <a href="#" class="sidebar-item flex items-center px-4 py-2.5 text-sm font-medium rounded-lg hover:bg-indigo-50 dark:hover:bg-gray-700 active" data-category="all">All Prompts</a>
                <a href="#" class="sidebar-item flex items-center px-4 py-2.5 mt-1 text-sm font-medium rounded-lg hover:bg-indigo-50 dark:hover:bg-gray-700" data-category="Marketing">Marketing</a>
                <a href="#" class="sidebar-item flex items-center px-4 py-2.5 mt-1 text-sm font-medium rounded-lg hover:bg-indigo-50 dark:hover:bg-gray-700" data-category="Sales">Sales Outreach</a>
                <a href="#" class="sidebar-item flex items-center px-4 py-2.5 mt-1 text-sm font-medium rounded-lg hover:bg-indigo-50 dark:hover:bg-gray-700" data-category="SEO">SEO Content</a>
                <a href="#" class="sidebar-item flex items-center px-4 py-2.5 mt-1 text-sm font-medium rounded-lg hover:bg-[#3B82F6]/10 dark:hover:bg-[#3B82F6]/20" data-category="Vendor">Vendor Communication</a>
            </nav>
            <div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">
                <label for="dark-mode-toggle" class="flex items-center cursor-pointer">
                    <span class="mr-3 text-sm font-medium text-gray-700 dark:text-gray-300">Dark Mode</span>
                    <div class="relative">
                        <input type="checkbox" id="dark-mode-toggle" class="sr-only">
                        <div class="block bg-gray-200 dark:bg-gray-600 w-10 h-6 rounded-full"></div>
                        <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition"></div>
                    </div>
                </label>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-6 md:p-10">
            <div class="bg-white dark:bg-gray-800 border border-indigo-200 dark:border-indigo-900/50 rounded-lg p-4 mb-8">
                <h2 class="text-lg font-bold text-gray-900 dark:text-white">Welcome to the Live Prompt Demonstrator!</h2>
                <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">This tool is more than a libraryâ€”it's a live testing ground. Click **"Test with Live AI"** on any card to open the simulator, choose a model, and see how different AIs respond to the same strategic prompt in real-time.</p>
            </div>
            <div class="mb-8">
                <input type="search" id="search-bar" placeholder="Search prompts by title or keyword..." class="w-full p-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
            </div>
            <div id="prompt-grid" class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-8">
                <!-- Prompt cards will be injected here by JavaScript -->
            </div>
        </main>

    </div>

    <script>
        // --- DATA ---
        const prompts = [
            { id: 1, category: 'Marketing', title: 'Relatable Homeowner Story for Instagram', objective: 'Generate a high-engagement Instagram post that builds brand trust and drives engagement through storytelling.', persona: 'A busy homeowner in South Florida who values convenience and reliability.', prompt: `Act as a social media marketing strategist for "One Home Service," a concierge platform in South Florida connecting homeowners with vetted service pros. Your tone should be conversational, empathetic, and trustworthy.\n\nYour task is to write an Instagram post based on the following scenario: A homeowner's AC broke on a sweltering July weekend.\n\nCraft the post to include:\n1. A Relatable Hook\n2. The Story (Problem/Agitation)\n3. The Solution (One Home Service)\n4. The Outcome\n5. A Soft Call-to-Action (CTA)\n6. Relevant Hashtags`, rationale: 'This prompt uses the classic Problem-Agitation-Solution framework to create a narrative. It defines tone and audience to ensure the output aligns with a premium brand while remaining relatable for Instagram\'s platform nuance.', output: `That weekend feeling... when it's 95Â° out and your AC decides it's had enough. ðŸ¥µ The panic is real! We've all been there, scrambling to find a reliable tech who can actually show up.\n\nThat's where we come in. One call to One Home Service, and our client was connected to a vetted, top-rated HVAC pro in minutes. No endless searching, no price-gouging. Just a cool home and a weekend saved. âœ…\n\nGet your 'peace of mind' plan before disaster strikes. Link in bio to see how we make homeownership easy.\n\n#OneHomeService #SouthFloridaLiving #HomeownerHacks #ACRepair #MiamiHomes #HomeServices`},
            { id: 2, category: 'Sales', title: 'Vendor Recruitment Cold Email', objective: 'Draft a concise, persuasive cold email to recruit a high-quality local service business to the One Home Service network.', persona: 'The busy owner of a well-regarded, local home service company (e.g., plumber, electrician).', prompt: `Act as a B2B copywriter specializing in recruiting partners for a premium platform. Your goal is to write a cold email template for "One Home Service" to send to top-rated local service pros in South Florida. The tone should be professional, direct, and value-driven.\n\nThe email must be optimized for high open and reply rates, keeping it under 150 words.\n\nIncorporate these elements:\n1. Personalized Subject Line: \`{{companyName}} + One Home Service\`.\n2. The Hook: Acknowledge their reputation.\n3. The Core Value Prop: Focus on what they get (vetted jobs, not lead gen).\n4. The Differentiator: Mention the "concierge" model.\n5. The Low-Friction CTA: Ask for a brief call.`, rationale: 'This prompt demonstrates an understanding of cold email best practices (brevity, personalization, value-first). It\'s tailored for a tool like Instantly.ai and focuses on the primary goal: getting a meeting.', output: `Subject: A Different Kind of Partnership for {{companyName}}\n\nHi {{firstName}},\n\nMy name is [Your Name] from One Home Service. I came across your company's great reviews and wanted to reach out.\n\nWe connect South Florida's best service pros with a steady stream of vetted, high-intent homeowners through our concierge platform. We handle the lead gen, you focus on the work.\n\nWould you be open to a brief 15-minute call next week to see if it's a good fit?`},
            { id: 3, category: 'SEO', title: 'SEO Blog Post Generation', objective: 'Generate a helpful, SEO-optimized blog post to attract homeowners searching for specific solutions.', persona: 'A South Florida homeowner actively searching on Google for information.', prompt: `Act as an SEO content strategist. Your task is to generate a comprehensive blog post outline and then write the full post.\n\n- Primary Keyword: "Hurricane Preparedness Checklist for Florida Homes"\n- Secondary Keywords: "storm shutters," "impact windows," "generator maintenance," "home inventory"\n- Target Audience: New or existing homeowners in South Florida.\n- Tone: Authoritative, helpful, and reassuring.\n- Article Goal: Become the go-to resource for hurricane prep, subtly positioning One Home Service as the connection to professionals who can help.\n\nGenerate:\n1. A Click-Worthy Title\n2. An SEO Meta Description\n3. A detailed Article Outline (H2/H3s)\n4. The full article.`, rationale: 'This sophisticated prompt shows an understanding of on-page SEO. It defines keywords, structure, tone, and the strategic placement of the brand\'s value proposition to generate content that ranks and converts.', output: `**Title:** The Ultimate Hurricane Preparedness Checklist for South Florida Homeowners\n\n**Meta Description:** Don't wait for the storm. Our complete hurricane preparedness checklist helps you protect your Florida home, from roof inspection to generator maintenance.\n\n**Outline:**\n* H1: The Ultimate Hurricane Preparedness Checklist...\n* H2: 3 Months Out: The Foundation of Safety\n* H2: 1 Month Out: Gathering Supplies & Details\n* H2: 1 Week Out: Final Preparations\n* H2: Let One Home Service Be Your Partner in Preparedness`},
            { id: 4, category: 'Vendor', title: 'New Vendor Onboarding Welcome Message', objective: 'To create a welcoming, informative, and clear onboarding message for a newly approved vendor.', persona: 'A skilled service professional who has just joined the One Home Service network.', prompt: `Act as a Partner Success Manager for One Home Service. Your task is to draft a welcome message for a new service partner who has just been approved to join our network. The tone should be enthusiastic, professional, and clear.\n\nYour message must:\n1.  Express a warm welcome.\n2.  Confirm their approval.\n3.  Outline immediate next steps (e.g., "Complete your payment profile," "Watch our 5-minute welcome video").\n4.  Set expectations on receiving jobs.\n5.  Provide a point of contact.`, rationale: 'A strong onboarding process is key to vendor retention. This prompt creates a message that is not only welcoming but also functional, guiding the new partner through the critical first steps and reducing potential confusion.', output: `Subject: Welcome to the One Home Service Network!\n\nHi {{partnerName}},\n\nGreat news! Your application has been approved, and we are thrilled to officially welcome you to the One Home Service network of elite professionals.\n\nTo get started, please complete these two quick steps:\n1.  Set up your payment profile here: [Link]\n2.  Watch our 5-minute partner overview video: [Link]\n\nOnce that's done, you'll be eligible to receive your first job requests from your area.\n\nWelcome aboard!\n`}
        ];

        const models = [
            { id: 'openai', name: 'OpenAI GPT-4o Mini', tier: 'anonymous' },
            { id: 'llama-roblox', name: 'Llama 3.1 8B', tier: 'anonymous' },
            { id: 'mistral', name: 'Mistral Small 3.1', tier: 'anonymous' },
            { id: 'phi', name: 'Phi-4 Mini', tier: 'anonymous' },
            { id: 'deepseek', name: 'DeepSeek V3', tier: 'seed' },
            { id: 'grok', name: 'xAI Grok-3 Mini', tier: 'seed' },
            { id: 'openai-large', name: 'OpenAI GPT-4.1', tier: 'flower' },
        ];

        // --- DOM ELEMENTS ---
        const promptGrid = document.getElementById('prompt-grid');
        const sidebarNav = document.getElementById('sidebar-nav');
        const searchBar = document.getElementById('search-bar');
        const modelSelector = document.getElementById('model-selector');
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        
        // Modal Elements
        const modalOverlay = document.getElementById('modal-overlay');
        const modalContent = document.getElementById('modal-content');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const modalPromptEditor = document.getElementById('modal-prompt-editor');
        const modalGenerateBtn = document.getElementById('modal-generate-btn');
        const generateBtnText = document.getElementById('generate-btn-text');
        const generateBtnSpinner = document.getElementById('generate-btn-spinner');
        const modalOutputContainer = document.getElementById('modal-output-container');
        const modalOutputText = document.getElementById('modal-output-text');

        // --- STATE ---
        let currentCategory = 'all';
        let currentSearchTerm = '';
        let currentModalPrompt = null;

        // --- RENDER FUNCTIONS ---
        function populateModelSelector() {
            models.forEach(model => {
                const option = document.createElement('option');
                option.value = model.id;
                option.textContent = model.name;
                modelSelector.appendChild(option);
            });
        }

        function renderPrompts() {
            promptGrid.innerHTML = '';
            const filteredPrompts = prompts.filter(p => {
                const matchesCategory = currentCategory === 'all' || p.category === currentCategory;
                const matchesSearch = currentSearchTerm === '' || p.title.toLowerCase().includes(currentSearchTerm) || p.prompt.toLowerCase().includes(currentSearchTerm);
                return matchesCategory && matchesSearch;
            });

            if (filteredPrompts.length === 0) {
                promptGrid.innerHTML = `<p class="text-gray-500 dark:text-gray-400 col-span-full text-center">No prompts found.</p>`;
                return;
            }

            filteredPrompts.forEach(p => {
                const card = document.createElement('div');
                card.className = 'prompt-card bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm flex flex-col';
                card.setAttribute('data-id', p.id);
                
                let categoryColor = 'bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300';
                if (p.category === 'Marketing') categoryColor = 'bg-pink-100 text-pink-700 dark:bg-pink-900/50 dark:text-pink-300';
                if (p.category === 'Sales') categoryColor = 'bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300';
                if (p.category === 'SEO') categoryColor = 'bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300';
                if (p.category === 'Vendor') categoryColor = 'bg-[#3B82F6]/10 text-[#3B82F6] dark:bg-[#3B82F6]/20 dark:text-[#3B82F6]';

                card.innerHTML = `
                    <div class="p-6 flex-grow">
                        <div class="flex justify-between items-start mb-3">
                            <span class="inline-block px-3 py-1 text-xs font-semibold rounded-full ${categoryColor}">${p.category}</span>
                        </div>
                        <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-2">
                        ${p.title}</h3>
                        <div class="mb-4">
                            <h4 class="font-semibold text-sm text-gray-600 dark:text-gray-300">Objective</h4>
                            <p class="text-sm text-gray-500 dark:text-gray-400">${p.objective}</p>
                        </div>
                        <div class="space-y-2">
                            <div class="collapsible">
                                <button class="collapsible-trigger flex items-center justify-between w-full text-left font-semibold text-sm text-gray-600 dark:text-gray-300 py-2">
                                    <span>View Prompt & Rationale</span>
                                    <span class="arrow text-indigo-500">&#9654;</span>
                                </button>
                                <div class="collapsible-content">
                                    <h4 class="font-semibold text-sm text-gray-600 dark:text-gray-300 mt-2 mb-2">The Prompt</h4>
                                    <div class="relative">
                                        <pre class="bg-gray-900 text-white p-4 rounded-lg text-xs leading-relaxed overflow-x-auto whitespace-pre-wrap">${p.prompt}</pre>
                                        <button class="copy-btn absolute top-2 right-2 bg-gray-700 hover:bg-indigo-600 text-white text-xs font-bold py-1 px-2 rounded" data-prompt="${p.prompt.replace(/"/g, '&quot;')}">Copy</button>
                                    </div>
                                    <h4 class="font-semibold text-sm text-gray-600 dark:text-gray-300 mt-4 mb-2">Rationale / Why it Works</h4>
                                    <p class="text-sm text-gray-500 dark:text-gray-400 italic">"${p.rationale}"</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-800/50 p-4 border-t border-gray-200 dark:border-gray-700">
                        <button class="try-live-btn w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 transition-colors shadow-sm hover:shadow-md transform hover:-translate-y-px" data-id="${p.id}">
                            Test with Live AI &#10132;
                        </button>
                    </div>
                `;
                promptGrid.appendChild(card);
            });
        }

        // --- EVENT HANDLERS & LOGIC ---
        function setupEventListeners() {
            sidebarNav.addEventListener('click', (e) => {
                e.preventDefault();
                const target = e.target.closest('.sidebar-item');
                if (target) {
                    document.querySelectorAll('.sidebar-item').forEach(item => item.classList.remove('active'));
                    target.classList.add('active');
                    currentCategory = target.getAttribute('data-category');
                    renderPrompts();
                }
            });

            searchBar.addEventListener('input', (e) => {
                currentSearchTerm = e.target.value.toLowerCase();
                renderPrompts();
            });
            
            promptGrid.addEventListener('click', (e) => {
                if (e.target.classList.contains('copy-btn')) {
                    const button = e.target;
                    const promptText = button.getAttribute('data-prompt');
                    navigator.clipboard.writeText(promptText).then(() => {
                        button.textContent = 'Copied!';
                        button.classList.add('copied');
                        setTimeout(() => { button.textContent = 'Copy'; button.classList.remove('copied'); }, 2000);
                    });
                } else if (e.target.closest('.collapsible-trigger')) {
                    const trigger = e.target.closest('.collapsible-trigger');
                    trigger.classList.toggle('open');
                    const content = trigger.nextElementSibling;
                    content.classList.toggle('expanded');
                } else if (e.target.closest('.try-live-btn')) {
                    const promptId = e.target.closest('.try-live-btn').getAttribute('data-id');
                    openModal(promptId);
                }
            });

            darkModeToggle.addEventListener('change', () => {
                document.documentElement.classList.toggle('dark');
                const dot = darkModeToggle.nextElementSibling.nextElementSibling;
                dot.classList.toggle('translate-x-full');
            });

            // Modal events
            modalGenerateBtn.addEventListener('click', handleApiCall);
            closeModalBtn.addEventListener('click', closeModal);
            modalOverlay.addEventListener('click', (e) => { if (e.target === modalOverlay) closeModal(); });
        }

        // --- MODAL & API LOGIC ---
        function openModal(promptId) {
            currentModalPrompt = prompts.find(p => p.id == promptId);
            modalPromptEditor.value = currentModalPrompt.prompt;
            modalOutputContainer.classList.add('hidden');
            modalOverlay.classList.remove('hidden');
            setTimeout(() => {
                modalOverlay.classList.remove('opacity-0');
                modalContent.classList.remove('scale-95', 'opacity-0');
            }, 10);
        }

        function closeModal() {
            modalOverlay.classList.add('opacity-0');
            modalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => { modalOverlay.classList.add('hidden'); }, 300);
        }

        function setGeneratingState(isGenerating) {
            modalGenerateBtn.disabled = isGenerating;
            if (isGenerating) {
                generateBtnText.classList.add('hidden');
                generateBtnSpinner.classList.remove('hidden');
            } else {
                generateBtnText.classList.remove('hidden');
                generateBtnSpinner.classList.add('hidden');
            }
        }

        async function handleApiCall() {
            const selectedModelId = modelSelector.value;
            const promptText = modalPromptEditor.value;

            setGeneratingState(true);
            modalOutputContainer.classList.remove('hidden');
            modalOutputText.textContent = 'Connecting to AI...';

            const API_BASE_URL = 'https://text.pollinations.ai/openai';
            
            const headers = {
                'Content-Type': 'application/json',
            };

            const body = JSON.stringify({
                model: selectedModelId,
                messages: [{ role: 'user', content: promptText }]
            });

            try {
                const response = await fetch(API_BASE_URL, {
                    method: 'POST',
                    headers: headers,
                    body: body
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`API Error (${response.status}): ${errorData.error?.message || 'Unknown error'}`);
                }

                const data = await response.json();
                const resultText = data.choices[0]?.message?.content || 'No content received from AI.';
                modalOutputText.textContent = resultText;

            } catch (error) {
                console.error('API Call failed:', error);
                modalOutputText.textContent = `Error: ${error.message}\n\nPlease check the console for details.`;
            } finally {
                setGeneratingState(false);
            }
        }

        // --- INITIALIZATION ---
        function init() {
            populateModelSelector();
            renderPrompts();
            setupEventListeners();
        }

        init();
    </script>
    <!--
Paste this script at the bottom of your HTML before the </body> tag.
-->
<script
  data-embed-id="6e6f0c86-eecb-4de9-a8d0-e6770b694a21"
  data-base-api-url="https://ahmad-chat.vo0egb.easypanel.host/api/embed"
  data-assistant-name="OneHome"
  data-greeting="Welcome to One Home Service! Whether you need a top-rated plumber today or want to schedule future maintenance, I'm here to help. What's on your to-do list?"
  data-input-placeholder="Search for a service or ask a question..."
  data-brand-image-url="https://onehomeservice.ai/public/site_assets/images/logo.svg"
  data-assistant-icon="https://onehomeservice.ai/public/site_assets/images/logo.svg"
  data-button-color="#53B8F6"
  data-user-bg-color="#53B8F6"
  data-assistant-bg-color="#E5E7EB"
  data-no-sponsor="true"
  src="https://ahmad-chat.vo0egb.easypanel.host/embed/anythingllm-chat-widget.min.js">
</script>
<!-- AnythingLLM (https://anythingllm.com) -->
</body>
</html> 